var express = require("express");
var app = express();
var cfenv = require("cfenv");
var bodyParser = require('body-parser');
var LinearRegression = require('shaman').LinearRegression;

app.use(bodyParser.urlencoded({extended: false}))
app.use(bodyParser.json())

var db;

app.post("/logs", function(request, response) {
  if (!db) {
    console.log("No database.");
    response.send("DB is not configured.");
    return;
  }

  if (request.body.latitude == null || request.body.longitude == null) {
    response.send("Latitude or longitude is not present in the request body.");
    return;
  }

  var log = {
    time: new Date().getTime(),
    location: {
      latitude: request.body.latitude,
      longitude: request.body.longitude
    }
  };

  db.insert(log, function(err, body, header) {
    if (err) {
      return console.log('[db.insert] ', err.message);
    }
    response.send("Log added to DB successfully.");
  });
});

app.get("/logs/:latitude/:longitude", function(request, response) {
  if (!db) {
    console.log("No database.");
    response.send("DB is not configured.");
    return;
  }

  if (request.params.latitude == null || request.params.longitude == null) {
    response.send("Latitude or longitude is not present in the request params.");
    return;
  }

  var log = {
    time: new Date().getTime(),
    location: {
      latitude: request.params.latitude,
      longitude: request.params.longitude
    }
  };

  db.insert(log, function(err, body, header) {
    if (err) {
      return console.log('[db.insert] ', err.message);
    }
    response.send("Log added to DB successfully.");
  });
});

app.get("/logs", function(request, response) {
  var logs = [];

  if (!db) {
    response.json(logs);
    return;
  }

  db.list({
    include_docs: true
  }, function(err, body) {
    if (!err) {
      body.rows.forEach(function(row) {
        logs.push(row.doc);
      });
      response.json(logs);
    }
  });
});

var X = [[40.009292213036254,30.41492897802298,92],[40.04905126570668,30.506153516560275,157],[40.12935049899984,30.343087828514946,52],[40.457886034932066,30.19887966329546,19],[40.65275172229624,30.640402121435486,41],[40.46105340147237,29.442355041997235,147],[40.1980443452062,30.1181792263224,131],[41.511928992187286,30.345163666462952,119],[41.498168975269415,30.68770659607918,23],[41.050900868627366,30.15003762537525,128],[40.54911137036873,30.847499816650043,66],[40.91483406089636,29.684947277943127,74],[40.44590212244838,29.645733034406547,99],[41.32175429598463,29.842199906384494,100],[41.148179062510934,29.6525475959071,25],[40.876810860088455,30.7560138760414,14],[40.66925486456558,30.278755618035518,140],[40.2195205231626,30.593434991521303,4],[41.796550789667776,29.442177473214556,46],[41.705859956471635,30.43275106644461,47],[40.285659388472666,29.211207037689608,140],[41.55030171218054,29.528355158066734,111],[40.76302282422447,30.063341543525926,103],[41.79075060018279,30.1993478345445,79],[41.5892704807661,29.24084025084034,74],[40.61133860557845,30.1534602667267,125],[40.85646022646768,30.96896954066574,72],[40.294103996693785,29.68699148105807,143],[40.68193388762728,29.386999218051503,122],[41.039263580783,30.01158289883214,51],[40.82026493843311,29.610329366829404,83],[40.50219772072849,30.239456883842422,19],[41.38900557367542,30.86809432301036,109],[40.72300363020613,30.45740568710742,34],[41.406096152325595,29.631208106873867,133],[40.560026894454744,30.389625182804206,89],[41.81569398343515,30.52220089770102,37],[41.93244167918498,29.681547548498585,44],[41.4425985698526,29.197292346122644,135],[40.709837793757984,30.371916295625557,77],[41.51561875609622,30.537006401750546,96],[40.51998089330233,29.003356253901718,88],[40.32267278808057,30.176441537210625,101],[41.20852430274477,29.993665692831314,72],[41.28336786578906,30.336396532990918,101],[40.137529147686884,29.58681200389156,80],[40.148607969252296,30.36413124808986,99],[41.22658234127389,30.627942938849362,75],[41.817450131708895,30.782178885829794,119],[40.726462866470044,30.202745189342583,20],[40.4718640295908,29.732130249970005,79],[41.90875249931525,30.49635792551907,59],[41.84679137681811,30.359331706546055,105],[40.34931648391904,29.206552538489554,53],[41.29206130863108,30.539557904303948,98],[40.569282195760785,29.89521163353045,47],[41.4462432930499,30.7146411712948,104],[41.83303078971209,29.997263794423954,120],[40.12899349180162,29.40200709048441,75],[41.95821049702278,30.996182835694338,79],[40.57657288112625,30.69349080404594,156],[41.66873164783714,30.905683241312282,65],[41.48160978104688,30.187022833217892,125],[40.70983260641173,30.997048024888386,52],[40.11395418570712,29.933480901841225,144],[41.26459398368562,30.757588652945756,20],[41.380298445938436,29.823604999738947,149],[40.49029266478963,29.437115390579713,50],[41.73503381625106,29.273007341199715,76],[41.550213053327646,30.668450871602314,23],[41.88302665491237,30.946300778331018,34],[40.91580395102264,29.878403482013702,11],[41.47972685580248,29.93657773269561,140],[40.186889649841035,29.987975199829922,66],[40.96379011695823,29.86852475835696,25],[41.706140427264856,30.368158845180538,65],[41.43431065063378,29.05779612020188,91],[41.56070736724737,29.37751699087028,62],[40.63411559676285,30.432945190423204,42],[41.47720087189225,30.840856985411104,135],[40.44170341843546,30.775173113702706,129],[40.07496743790991,29.32058855706479,67],[41.6941997690237,30.777189580572323,76],[40.64668494215369,30.128223247464604,117],[40.47598349713632,29.82462603331898,64],[40.96533373730414,29.5375745572362,16],[41.649329043382714,30.210392217746275,133],[41.920735836414835,29.845051462262322,39],[41.23068712030839,30.727995998202157,130],[40.093927918114694,30.034633852531385,104],[40.093221004022894,30.560468782681944,147],[40.418801469958396,29.42184520609879,107],[41.51413429980771,30.943608092345688,78],[41.592477886321646,30.139967080905127,47],[40.78366858146778,30.692157584477073,145],[40.077967068874166,29.605404714686948,48],[41.31741512959529,30.803242363526024,35],[41.68673073020273,29.872866905861578,28],[41.391987711226854,30.738057457434437,40],[40.420230016550626,29.457779180976786,68],[40.22628638394808,30.421721261558506,39],[40.34752137282908,30.13403474866203,94],[41.792663865960684,29.655306100796558,111],[41.21006667640166,29.702459212398693,121],[40.07936515771383,30.812321397622153,10],[40.100721031463586,30.730861134707823,96],[41.997873499845774,30.96057760301239,146],[40.444127215680304,29.277669075941457,146],[41.060129631218224,30.064642758704082,46],[41.71367263003971,30.358268606013105,102],[40.21182004265866,29.808324171459155,115],[40.51732244525604,29.823499144339014,152],[40.880988487752376,30.485655038197716,56],[40.03706367832297,29.81082872616044,142],[41.43651306490401,29.249526371000904,94],[40.51407475705776,29.32747897944667,43],[40.37263361137169,29.164615595401184,143],[40.68312951504333,29.426076474338586,27],[40.65773961100843,30.412226058606457,127],[40.21706223078163,30.43491827954645,101],[41.32550055409382,30.38138232624403,121],[41.00619942738252,29.66125583915829,126],[40.475033041401595,29.790904579413958,129],[40.96117752057116,30.757405901733684,30],[40.08390522029705,30.416236204206914,140],[40.41520246708335,30.00483249481721,87],[41.72195860944997,30.43093623999397,75],[40.80830213141315,29.89136569719848,18],[41.96396501146536,30.519470121366613,75],[40.991842067454314,30.087470051001517,94],[41.00933417423864,30.25782852528583,127],[40.78979864581107,30.533030443201515,56],[40.290989513699174,30.146498611988928,41],[40.87689664727046,30.27349230042249,39],[41.011837825022326,30.678972568652345,78],[41.63027668739153,29.540879912222813,85],[40.1404622745112,29.321951803175295,85],[41.13306302955012,29.886191013549173,15],[40.66206700439861,30.90033631733826,32],[41.06255477840411,30.26195654984104,63],[40.66344079103304,30.32144827134294,134],[41.68273570587335,30.08765329130941,138],[41.880646903241434,29.454148189226366,113],[41.94664455654739,29.779966695695578,77],[40.066974746549604,29.11156293217369,38],[41.2385581125578,29.94157306703397,127],[40.70418224172569,29.675096396587776,162],[41.58311342414923,29.76185884130973,64],[40.83229680535092,29.647161947280892,138],[41.48075241842105,29.710019354165617,29],[41.54657534473589,29.2626524279681,129],[41.74706912923802,29.14531805454191,71],[40.50205099867964,30.498755624853167,51],[41.38955089909585,29.418156003479286,19],[40.72735945278296,29.472795689735015,127],[40.588294744215226,29.831205914714573,34],[40.09967128446038,29.824154245843935,134],[40.32560887737381,29.839435389698288,124],[40.49013477109714,29.06673321222188,57],[40.76117933262819,30.25284064177977,133],[40.744012402236685,29.228525292697956,66],[40.25332550154781,30.844887045331667,100],[40.91174645347055,29.97094361844674,35],[41.434607677993554,30.144276436907948,35],[41.963770858333724,29.578886159170906,53],[41.536128847196274,29.199841502737083,38],[41.04339634737242,30.68368776758323,119],[40.640768578064225,29.9372508404877,93],[40.30706555866604,29.251661272332218,76],[41.12243979766469,30.496140312622178,121],[40.37855658130098,30.79124195411965,16],[41.980210895070584,30.55441826447999,65],[41.5200765560143,29.459095930791705,27],[40.0176492255094,30.96285191188909,75],[40.29410858491636,30.213800382013304,23],[40.719636886423416,29.72060950714972,38],[41.870011852516505,30.805083631123345,109],[41.217460277642964,30.491225999405557,74],[41.10674645147327,30.657689660051904,98],[40.233057201324804,30.09316702833561,108],[41.15000615744882,29.792682031381787,100],[40.63082811537422,29.43855151168897,101],[40.643230550873646,29.233447058083442,112],[41.24000935902929,29.79932301834474,61],[41.532776875723975,29.80759348354922,122],[40.28249663398401,30.718742105669108,162],[41.04685964578114,30.36122871896705,136],[40.40657980325547,30.698797998220208,110],[40.50819219933655,30.003747678896268,26],[40.356904844292394,29.989566792949844,86],[40.28238837727457,29.885568380340324,126],[41.54842268665914,30.77863342111738,61],[41.61171862578337,30.12733449408929,62],[40.566464365576515,29.963453720153463,89],[41.233425994466536,29.201461595255505,151],[41.01158709218917,30.858433041612347,40],[40.52245743406809,29.371476737557636,43],[41.39196529561643,29.46967007576988,122],[40.51301371319024,29.677771306934144,95],[41.86579590065203,29.755710394215498,49],[40.25416994957577,29.28293310361647,116],[40.81448891891594,29.63318104856867,44],[40.02061322513697,29.6294510493754,52],[41.438780072978396,29.794119258190968,36],[41.79436040766481,29.805501196030203,91],[40.74172853842391,30.367783410719984,164],[41.42299393165582,29.627825373509623,32],[40.57325544540625,30.84849532584716,150],[40.36771881852346,29.7594701763041,60],[41.3719306240225,30.20796782862224,153],[40.37961659986864,30.26583071842919,147],[40.317845488385984,30.350612979410098,30],[41.43889442866424,30.91639225678302,77],[41.1279364671255,30.722147550335833,91],[41.50086353668432,30.60556680336188,119],[41.509787414845796,29.20733767493566,31],[40.98442121777718,29.65367600114679,34],[41.04932741289836,30.290274900640224,11],[41.516492964715226,29.31601698973344,109],[41.72896104488925,30.22440812937598,130],[41.81944667068521,29.80593221839433,101],[40.67501829193628,29.309801825019335,61],[41.15937684578776,29.304816758089274,101],[40.401621378329054,30.262038450705322,99],[41.06753940332208,29.153860980540067,81],[40.76819942230891,29.894599677959487,33],[40.97488722997662,29.99706357357867,79],[41.95522769953088,29.962823460551064,20],[40.893265637835285,30.156891806856894,30],[41.154585569610326,29.653178888801627,90],[40.307929886245724,30.895905737791526,143],[41.799778977267685,29.464142324298038,165],[40.502094819219145,30.773260220935796,100],[41.06514745940292,29.29690732423276,138],[41.209178666463025,30.325489224789216,120],[41.881443447548605,29.113478545625057,87],[40.00043711852328,29.328354803826812,110],[41.7589947811028,30.23687753205715,97],[41.84000231793267,30.077767172810617,131],[41.34260924691834,30.82069711559585,141],[41.35554921191087,29.751670703801857,12],[40.518780400028305,29.080077097361716,92],[40.176854939660096,29.261151801999134,120],[40.29710056355103,30.60652432669034,24],[41.771522709744225,29.904656220372576,57],[40.828688915134755,30.681010626925833,72],[40.86203388182682,30.115318090632204,107],[41.20964379709893,29.789160680751024,114],[41.110451823623755,30.814093689167397,101],[41.515147700011795,30.208793463446167,104],[41.65081618673443,30.24919311936501,151],[41.70684832767886,29.428913084961767,49],[40.89565427026301,30.419269625704025,36],[41.94582641442487,29.590490124703653,15],[40.75794330390662,30.79531286022698,156],[41.53102517327727,30.495079176885838,79],[41.41405438286545,30.058266341002977,111],[40.37447791330446,29.56079753350953,11],[40.76984476120024,30.185117403600227,150],[41.661179176696216,30.825322549764604,45],[40.58910859508314,29.346090081512774,165],[41.78403309589163,30.200655830908005,146],[40.45709846449659,30.84021131538,114],[40.25214214950296,30.638335948507716,87],[40.94192460320453,29.417575031676584,78],[41.68137765999377,29.295974654383237,141],[40.99241924512991,29.95382138068815,20],[40.818042887046246,30.812805068905114,136],[41.75325643645181,30.483758487609105,42],[41.44693538650039,29.844195619368186,44],[40.18116282787928,29.79076802734249,74],[41.55891177066987,29.703648905176077,70],[41.122686025673744,30.90283759336577,140],[40.39576140051908,29.647198016140045,73],[41.56703466476949,29.08019671526937,88],[40.80817637686684,30.748170390537393,54],[41.22790808220223,30.11414258096471,129],[40.268433419687724,30.085969801125547,95],[40.57321878594147,29.267396707966657,103],[40.8030468527068,29.750566321504746,146],[40.88862835194589,30.90815696721506,127],[40.653556800703576,30.606944461842158,30],[41.99033018353262,29.030361663063292,34],[41.4465498362152,29.063980701781812,44],[40.74939545824958,30.151175083232307,51],[41.38037747048814,30.33128053429808,115],[40.79035068751168,30.002950694293858,73],[41.13511227333524,30.357621918933816,125],[40.325681294121125,30.661791135737744,139],[41.787058131888365,29.71083481307012,152],[41.100470362660815,30.166287723012843,84],[40.618254875296294,30.168583115897622,129],[40.28260993120184,29.928486202888447,105],[40.52852185013279,30.150763995122865,30],[41.88324058020274,29.283216067104316,134],[41.20459556545312,29.97245579083341,55],[41.668980853476796,30.558892176160153,35],[41.22916818304264,30.960978785776586,114],[41.033357302041935,29.256824425004744,25],[40.35358458065601,30.63370497747515,45],[41.629203003850186,29.367465427332316,107],[40.02396313448707,29.93124196330717,146],[40.13287222258135,29.064735539358843,159],[41.740517313273955,30.301879244284063,150],[41.50886953087093,30.799662479185905,10],[41.775398698083436,29.620704767384986,106],[41.76406148635072,30.806724608729226,114],[41.860971521386716,30.543996521999848,49],[40.85263906545472,30.15588577073043,76],[40.20677920235121,29.758840055469104,144],[41.49303333713736,29.522690556319006,90],[40.26055938984541,29.025356468502654,155],[41.302551953192534,30.64455195887393,148],[40.007985782364656,30.528966434718193,21],[41.942925890361856,30.437332754553516,62],[40.18251446976646,29.064273069306424,128],[41.519647484991474,30.76594004037632,99],[41.99822427998865,30.89611438917696,59],[41.90128439943825,30.767337768791087,135],[40.330779962663684,29.042778657664925,23],[40.20575233780077,30.91687417279365,50],[40.590599605363494,29.09227492107462,122],[41.94205970626922,29.73322301010485,53],[40.57514125523222,30.38345109261026,111],[40.3051012779997,30.648045521546788,25],[41.60281012460121,30.9291908401673,164],[40.56454118687413,30.785523532469096,99],[40.092696283379404,30.78873041930109,119],[41.814403035837,29.787285580016608,21],[40.951356491001015,30.806708452189056,134],[40.60645161351501,30.31515430234711,116],[41.02901923861137,29.838103096845657,105],[40.4160617073704,30.895185926779295,123],[41.823954502795594,29.210497629750886,124],[40.68866199186565,30.778490297786885,21],[40.15567547230785,30.30924956158594,72],[40.8597320227126,29.13781668900911,18],[41.610704063663384,30.026888616073656,96],[40.05833421735269,29.506334950182257,47],[40.39254222840338,29.37531189103791,101],[41.80291063843969,29.090636113410895,98],[40.61918527814204,29.389753234141626,12],[41.332765873189096,29.824098239185574,160],[41.34929799129872,29.5655580309307,148],[40.24149724275444,29.7658735012361,145],[41.27343335613585,30.406417387279784,124],[40.30884226497031,30.004009985728654,43],[40.85604687638746,30.260374660941338,11],[41.04571179205834,29.612273402893784,23],[40.921710716317016,29.6200741139668,21],[40.22617626565905,30.497745253723657,130],[40.64193395653105,29.29547223026551,130],[41.001306059784746,29.058112648175978,66],[40.94210942163906,29.495913331340084,121],[40.20426990328084,29.8259237587327,164],[41.41637807542967,30.496118757793173,66],[40.27320365291381,29.10297023606015,142],[40.87902728528615,30.46973658188939,146],[40.337869162006236,29.127649319191644,59],[40.11276596601993,30.046487409391176,50],[41.04702324100122,30.55030947367971,17],[41.32715273438866,29.646254373451843,38],[40.6229340904138,29.656077897348112,152],[41.705743725736404,29.615301492552764,151],[40.768806012106,30.124774354065565,131],[41.277621947738155,30.581398684263725,98],[41.11101874123568,30.92125370003788,98],[40.085137891374416,29.909375220131338,91],[40.36638752104968,30.671036554258684,53],[41.088822291780374,30.864932090885723,124],[41.97667324481357,30.77630490698436,72],[41.72252682913483,30.838591909708228,94],[40.01236581031035,29.145128333200372,137],[40.03181451455378,29.503135126745747,128],[41.42629472728497,29.894989827034724,145],[40.78349758647618,29.896001196134673,132],[41.7186329260101,30.595401744071392,119],[41.253959968719464,30.383662696942885,149],[40.53529262708742,29.89211957672847,103],[40.903343793026664,30.07093671845131,113],[40.536921145023584,29.954068107817804,102],[41.97156005017445,30.542405547224355,71],[41.34449163981307,29.2061508693712,97],[41.92439671367282,30.395386797449557,66],[40.034068774281685,30.010315403249013,4],[40.47562758029446,29.27146280283895,50],[40.02361840007994,29.56923357936693,60],[41.63612691883629,29.58960449486614,84],[41.15831997447203,29.28399296234805,41],[40.77858387750317,29.190693337697486,140],[41.05968658661859,29.93569188551425,108],[41.61732058741208,29.909090581276228,161],[41.40374477028408,30.57665778125135,44],[41.4689523788967,30.646518994054713,50],[40.65614267805044,30.34544494500687,117],[40.50668935746318,30.231438468233176,92],[41.74245917186342,30.22723549170276,75],[40.584131919212815,30.179986174343117,87],[40.304512076300014,29.93878153774948,134],[40.382356641590555,29.876590766678827,63],[40.24048725236623,29.13346365788798,34],[40.837902882775666,30.16955612433553,135],[41.10008369044488,30.990947174826683,68],[41.33885418079614,30.802159342772825,54],[41.400114981786786,29.158112692276976,79],[41.70720086426634,29.347511502967276,36],[41.899469810569094,29.663336851827374,119],[41.364795398085604,29.242573643009393,140],[40.86907578990074,30.374179686932667,66],[41.55363349108026,30.229140149744108,42],[41.21623185526538,29.351694831978044,87],[41.052051307726636,30.682437563887415,149],[40.168207219020765,30.30105550945372,104],[41.182006083225716,29.033731796148242,49],[41.030017157287965,30.40056412265312,12],[41.98593258626453,30.85652828179117,74],[40.25296974387644,29.191948292044195,56],[41.22735538772166,29.368489023526116,58],[41.645571844683225,29.435923258712346,138],[41.60351391142311,29.3480058748061,122],[40.940706450049994,30.395644618456902,31],[40.77954287860311,30.45739081933979,44],[40.621068104053144,29.449734700694584,147],[41.88812424365174,30.282030903238955,49],[41.2383082262365,29.821099083255557,114],[41.26798258266363,30.308407846846578,62],[41.43585896083426,30.334212982192685,114],[40.359314414032994,29.01234652755076,118],[40.38364943137262,30.815155311625297,130],[40.05785841575845,30.869805083450352,104],[41.786404689087234,29.33722371657543,116],[41.656927183791765,29.983255044644494,118],[40.337929761981435,30.270503878329237,108],[41.95951625905074,29.490532265739223,112],[40.12065614453416,30.0845696802086,116],[41.69031601901897,30.500206391299685,96],[41.345092822126524,29.796474805212036,30],[41.924632320358626,30.918032694476715,25],[40.82568508819343,29.464221048540853,47],[40.98952883388413,30.096119029790902,151],[40.440658931793784,29.95480380572799,62],[41.22216674446328,30.50266576838634,45],[41.35942215789981,30.8654755173403,15],[41.036475830652854,29.37258937245459,134],[41.61399414320628,29.536127283334103,79],[41.430381787693335,29.850364203828722,20],[40.95419327573952,29.960930870593447,22],[40.50110817803389,29.86378298651784,79],[41.997429838350094,30.380499812466685,19],[40.617445069517245,29.780824257244205,34],[41.03093015575502,29.530328287512692,64],[40.94149503817222,29.240556478265404,41],[40.363786575074116,29.970003516490312,53],[41.85878435973137,29.71834580661133,109],[41.11547856379075,30.139404486697387,41],[40.20787314943859,30.686852280565375,90],[40.29737268948479,30.444607861724606,42],[40.12528818311895,30.278602036094398,47],[40.46540984316147,30.338046212979222,31],[41.665578015188906,30.37898829189785,126],[41.902257196875595,30.470864864269362,60],[40.330683407605164,30.97629487295189,99],[40.70503234123556,30.5456424227844,28],[41.4113672025643,30.7484840546137,157],[40.12782943274715,29.180965996285984,40],[41.804226548983245,29.941045950003094,79],[40.607294348442096,30.675550141876688,27],[41.990133570190196,29.728471331478033,53],[40.14133403902886,30.365238000474044,125],[41.72208361014877,30.10767748487027,110],[40.22096485512625,30.878058728249574,121],[40.73884661766411,30.89532589166473,32],[41.74305354099724,29.887904943097027,77],[40.15477511496411,30.290883588590756,59],[41.60174198037287,30.913698006581882,97],[40.98607735663739,29.24235333241285,98],[40.54112407176836,29.736686291352058,29],[41.552696472725735,30.205056943018118,143],[40.53774655190702,30.241415504690153,106],[40.20588398906463,29.557821443971985,115],[41.97002412132745,30.32487172962488,69],[40.81013276215098,30.199660526527694,33],[41.62183498302213,30.985847904263945,52],[41.19064037473633,30.350487780927388,107],[41.18440604058119,30.128595534582583,105],[41.774451145215295,29.65109089977036,152],[40.50469666844017,29.195333526503568,138],[41.352257227807776,30.402171544241735,131],[41.598111640439335,29.671951553785078,158],[40.19640450592202,30.12990351736973,43],[41.802443797060164,29.914179968357814,129],[41.14673810312509,29.385147983716035,14],[41.48450142964553,30.449367990876354,61],[40.730297347418,30.389011189131967,89],[41.105023641317345,29.566254631728928,31],[41.90621162616215,29.49295654923449,17],[40.103357771759235,29.150628777919742,75],[40.59788276903422,30.56794117679341,19],[40.51399788701024,30.23426747623802,72],[40.54132982786659,30.69697603348267,136],[40.704752367932954,29.560933230722746,65],[41.98697425810422,29.034390510779843,42],[41.88719655208685,30.32239464484827,74],[40.39538849860792,30.1089257141606,127],[40.611474360623774,30.37815066754995,101],[41.406520728669825,30.790934647747285,72],[40.33381473558742,29.702114414052886,155],[40.13990724416112,30.668225127668734,104],[41.98746727384978,29.59091997515377,53],[41.4131793922257,30.843393383092522,116],[41.908101121444986,30.232920704901225,68],[40.95861677251891,29.665330738282847,35],[41.503479477441466,29.516529350901322,28],[41.34518568234033,30.82415073805491,97],[40.671075612504936,29.744026190359687,58],[41.35056805749141,29.539729622707366,91],[41.242543693261666,30.680660136553325,14],[41.52356428048782,30.77152796981249,144],[40.898285756138904,29.80322616837349,46],[40.186758396459645,29.139964882005103,68],[41.308515982391185,30.9460216322478,56],[41.73492896085739,29.261562546844136,122],[40.26596409247593,29.779681171308695,58],[40.76371581115207,30.945623059799697,64],[40.199155220967846,30.533411796876813,130],[41.102153376825164,30.729070792115618,64],[41.10029095515293,29.412681130431892,76],[41.22885158762107,29.550221877407118,62],[41.3940656185626,30.19964173113039,81],[40.88127806990595,29.611709192378832,89],[40.22017522995095,30.4146318813376,90],[41.26914148057697,30.818926072728527,39],[41.812717036237814,30.016487877780705,134],[40.07757705556265,30.232225240251704,93],[40.817255032911646,30.572078458310564,125],[41.47074615200145,30.732171043027073,154],[41.78512312652544,30.846706863817456,17],[41.95194353160946,30.23051213331734,18],[40.2918859098371,29.35729538639813,117],[41.046103230474976,29.77457909095464,34],[40.02638791904975,30.3084021118118,109],[40.43882266239925,29.3087426420208,25],[40.50497354288487,29.534938203503522,76],[41.044776392444085,29.074716392865124,56],[41.804558379153576,30.86469639715846,66],[41.19564109855226,30.05127968981863,74],[41.43249813037774,29.78987375537559,57],[40.97258777767636,30.302026969195797,91],[41.61178674051634,29.718106611173205,131],[40.19380400880808,30.315905183015786,36],[41.12251865325805,29.746285890118813,52],[40.543761601521304,29.6521680874534,79],[41.07777380839666,30.40582197788981,83],[41.157574396348615,30.631836272469513,133],[41.102869605896565,30.10057383584328,79],[40.218665904289466,30.99564666424029,125],[40.1152603071191,30.154998740385018,114],[41.32892911858024,30.133042066018866,144],[41.96244327004891,30.566392620622736,32],[41.180978356975245,29.139148566331038,149],[40.96656394147571,29.094529142225802,41],[40.93451159718849,30.359829427506224,38],[40.76745277078257,30.627700854275854,21],[40.883850396961286,30.182447534167995,87],[41.27020907969611,30.674255496579768,36],[41.717429762157145,29.370830990403817,130],[41.73653401929964,29.985693256572176,148],[41.77723302480957,30.11244814620799,105],[40.55239862902117,29.118600130788273,30],[40.98061979844561,30.043017800652834,104],[40.993263748541224,30.127838571981485,141],[41.36240779816703,29.830225251983435,147],[40.1403102342133,30.78271721593974,24],[41.109889652355015,30.60185121700104,142],[40.183008555850016,29.58779062894055,78],[40.32931235845008,30.147272436441888,13],[41.06472261306194,30.599955649456952,14],[41.68837160073251,29.10559305690441,43],[41.42789276735208,30.99232902880616,114],[41.452484672027474,30.183251846057733,156],[41.79833925074813,30.869618605316127,96],[40.59790028060172,30.6234216548816,102],[40.162984762534,30.410547081905683,114],[40.68888211510436,29.931455792619406,73],[41.751607947126104,29.371407580303227,152],[41.20482900587862,29.166448921715123,125],[41.38130505660249,29.967583167664902,60],[40.62594533619131,29.219625826980078,92],[41.96679395487488,29.76814801603601,17],[41.99194056246773,30.04674071445737,111],[41.38174031541351,29.81991104287325,9],[40.25853137974861,30.95256067116393,19],[41.14986962527101,30.36774234473652,43],[41.68108518311092,29.832493502123057,137],[41.009542486950714,29.06947130294818,104],[40.149412961272944,29.357175935112465,50],[40.86418244631191,29.37484930855313,16],[40.4357188543257,29.045302700656574,65],[41.54112266978137,29.657147620615625,166],[41.46859831573426,30.827597346187876,37],[40.97667783962994,29.88255028212624,102],[41.964253880761376,30.044059288815838,106],[41.73751394540513,29.53567726631758,64],[40.29383552806915,29.885231145233412,88],[40.5081138289446,29.559263326177025,51],[40.796649141669874,30.598240148199636,106],[41.99791911176278,29.380981618432127,47],[41.98667806369393,30.511466063720274,136],[40.58075921337586,29.239037571211213,98],[40.211510958177364,30.70967606961967,25],[40.29698441113017,29.89303559370286,65],[41.02064226604133,29.489599327050698,41],[40.39749322758219,30.978087894366237,76],[40.70904689055088,29.516888974751197,46],[40.738191293863245,29.351609350566182,109],[40.822680101008025,30.330772219347974,74],[41.339794391427546,29.71106901586451,86],[41.050246646426025,29.340729752679326,146],[41.96253996914744,30.08903833212155,59],[40.86443587405938,30.04718818114037,77],[40.11327569652784,29.118316004917645,98],[41.80644735652894,29.986004193879207,43],[40.66885214626765,29.37672469810703,52],[40.2152741770908,29.15241153229025,123],[41.379549541817305,29.52719754967989,146],[40.79580038109356,29.82855701508668,133],[41.9411062601631,29.23502630330599,25],[41.34741379326945,29.289671133419596,147],[41.62519533961083,29.17591104723278,21],[40.91586834238878,29.453309283571176,144],[41.28204260383408,29.134608119140605,31],[41.036099635162465,29.726656786579717,91],[41.886937099112494,30.235005541626276,41],[40.76939799031034,29.104143032875264,134],[41.2081681133777,30.24791340480787,147],[40.63738536466242,29.77133603974074,101],[41.83110760723606,30.827303480562925,95],[41.66100270809131,29.633340294452694,82],[40.01950309296807,29.897531255553684,144],[40.23100710811728,30.33909516400374,148],[40.95622864391696,29.40820419877248,77],[41.37044547838478,30.90896648436008,62],[41.253597701585306,29.388058573127562,92],[41.59141706037713,29.9718056069563,100],[40.0241579155969,30.112464300056338,108],[41.388431448961626,29.345498451453032,115],[40.77966457912894,29.019575316349293,72],[40.61514800755632,30.65465239681587,76],[40.04300034895784,30.49157434188683,111],[41.0962548425453,30.172228738791247,44],[40.98060265804975,30.779605276117685,91],[41.41160308496934,30.56412501817936,49],[40.168867425827216,29.53951261642587,121],[40.24405393245361,30.994082933900053,57],[40.86379280524715,30.839411313056893,104],[40.06677856202112,29.377791604944306,67],[40.175407988405155,30.76268478383218,25],[41.879215995414434,30.295720212185312,89],[41.26904916578421,30.321060686330924,74],[40.04960832512885,30.432290700114233,98],[40.52936352147528,29.98737369235677,12],[40.17038677527798,29.007808951759525,108],[40.14923546108837,30.875456441059534,38],[41.62506006464475,30.442551284609266,24],[41.768827909450415,29.005280210406355,128],[40.2734692449333,29.009898394982315,20],[41.627818216137804,30.354234748088736,65],[41.29157077074888,30.99149501626767,107],[41.25436821330902,30.726207790064798,25],[40.40374253473974,30.801557184595175,106],[41.722767353353724,30.5626274520965,116],[41.337830958464195,29.1096901886919,54],[41.861419216634744,30.05550799873975,81],[41.91642554814243,30.09956430928557,78],[40.2612437876095,29.5809836014382,107],[40.64348720696199,30.509717332131302,60],[41.84530778865306,30.25729717515726,31],[40.1695304849517,30.887244614794998,85],[41.95552862644507,30.65897790323929,22],[40.39010411126474,29.268832966531445,19],[41.555262267265114,30.34093060061545,147],[41.325785322753354,29.365945798500846,100],[41.70925717002531,29.432150127341544,160],[41.333414350862256,30.234652422277524,66],[40.546954210341625,29.460809301044236,30],[41.066989796573246,29.123822317736256,97],[41.469119444838725,29.128365055936666,141],[40.12989079658951,29.02613933631967,130],[41.94661085988779,29.85238845576622,77],[40.02677236683803,29.979988107029836,88],[40.069986582845395,30.642836471842465,75],[41.78472401354021,29.024542476206204,97],[41.13991030385513,30.42303427511724,106],[40.690234471175174,29.136517771514406,162],[41.52621515318556,30.043285339752494,63],[40.93998141864467,29.87174277517263,115],[40.27902980429223,30.287822335599053,135],[41.2942453318,29.846988195676925,45],[41.94980135387277,29.989715529884855,92],[41.93017080353577,30.04628323612463,101],[40.453557504301585,29.56283117396637,82],[40.17558125381428,30.557860109711864,90],[40.4155159661545,30.550915960889018,113],[40.14495719478165,30.664861724937808,40],[40.68538611884338,29.180078244275276,148],[40.52227742114993,30.96745310354673,109],[41.08792744403904,29.56395810710398,86],[41.295515567046024,29.43668934548257,52],[41.26986170600574,29.961237380846775,123],[41.57538544509979,29.984945197482194,52],[40.14614819711607,30.969575055851188,73],[40.19472063295562,30.942125052587812,43],[41.1063702529687,29.363004732119293,141],[40.76869073141526,29.68580304983639,132],[41.51646580526983,29.63117874533725,49],[41.10527225802532,29.202721975805535,95],[40.45316377434376,29.459635114760733,135],[41.55909198699181,30.47933928784692,89],[41.881301872974625,29.39440968860527,124],[40.77362141905979,29.16074288249987,17],[41.00167122993392,30.504727402052048,33],[41.01205739437138,30.855616925041996,53],[40.62302781521526,30.48017595688926,105],[40.62614755688331,29.34694212601347,57],[40.3927499276426,29.485764290141713,62],[41.29300760892129,30.711776301508472,75],[41.22514736941406,29.276542203246642,152],[40.769031838418016,29.392097365140216,54],[41.82613554302944,29.262004683035137,161],[40.763918002055064,30.97369682107829,143],[41.58867959503326,30.555492656996805,151],[40.08271394319648,30.528962284526035,31],[41.113308939094324,29.209624771466167,18],[41.51746180213996,29.179013488403967,67],[41.24639319210785,30.656843959861757,51],[40.48912505831428,30.57580928684803,132],[40.467108072798204,30.270954208983607,93],[40.07508415328836,29.75847575522127,115],[41.72838175585281,29.93610889170188,47],[40.973601939721135,29.99731797765601,84],[40.130990009188096,29.569900793037352,118],[41.393235290095134,29.33359965397368,23],[40.96225536738669,29.16029745898263,65],[40.7639623814138,30.621736584039787,40],[40.23251919580318,29.393747254379505,65],[40.48261805846004,29.706036953170603,142],[40.73882027998577,30.638261282237494,52],[41.69514912678468,29.96089256792954,80],[41.44735725360767,30.833286089200907,116],[40.852839509948105,29.431865833994628,68],[40.39315179015085,30.82829333024843,48],[41.4955488726771,30.799098208312852,84],[41.94335411747582,29.652734761678047,76],[40.266424759749455,30.488925510624647,57],[40.91424173610625,30.840270815051184,162],[40.189402029648726,30.610366732185422,139],[40.71816916857184,29.699087648392634,126],[41.24706101368596,30.812818894889187,77],[40.8576919582658,29.519599209425262,150],[40.7889746528736,29.54012576685844,139],[40.11406871881732,30.11149710157746,145],[41.218253820258454,30.35888785844754,62],[41.22464740495345,29.2647123573474,80],[41.06497546899794,30.73625863281475,71],[41.85209693120959,29.075903369599466,74],[41.87384376334231,30.053369136249064,135],[40.21411574719147,29.998481440241523,35],[40.54892285591637,30.13818250916075,151],[40.937735764520504,30.416272642843865,111],[41.32199469232184,30.27328361495144,17],[41.67766031442388,30.2479719774745,98],[41.69470540691259,30.92352555788747,132],[41.656681641383955,30.341937812033425,99],[40.15042844718034,29.11470085699345,55],[41.33611336602422,30.75088516461118,152],[40.649995450793654,30.545322959360433,102],[40.59281094051049,30.52566686246679,66],[40.45646724707878,29.981959450855648,48],[41.46596774588936,30.03409042600201,50],[41.504330146244286,29.475945693730864,52],[40.5236906449139,29.056132188267853,15],[41.43750533469482,30.364978365123097,69],[40.8385510405995,30.09756107920264,10],[40.692884526770996,29.312283268821403,89],[40.6395897631217,29.72967904388328,157],[40.6951592482591,30.008351969986336,46],[41.71836250491256,30.12798307982822,98],[40.77978267387386,29.30634586330202,56],[41.293538457596384,29.269475927225525,118],[41.60972754298155,30.82525966587546,139],[40.049069393675,30.79135922226729,18],[40.22813862448691,29.88954387228,35],[40.535702053231596,30.671354070962302,58],[40.169520244930055,29.090487006015067,153],[41.14061235778777,29.17285581291968,86],[40.5570442475226,29.733110066810923,155],[41.34756950977526,30.457055802215216,19],[41.87537555200321,29.752729654792777,134],[40.72843838786916,30.12816226232913,57],[40.47827397963303,30.99163045517254,157],[41.77808424715945,29.113590934627116,75],[41.56775671877053,29.544614540481906,61],[40.53352533458691,29.20703600563034,69],[41.505712320531664,29.224674404443277,43],[40.19753517597732,29.13140603870363,110],[41.032480337713885,29.259557450401417,95],[41.94978197819572,29.599483634099958,143],[41.30660060808561,29.651432933316155,68],[40.358089567120544,30.76761801331486,101],[41.71544048376866,30.550563799687,84],[41.10623859080537,30.286977996715823,25],[41.08325257658474,29.598815762893082,51],[40.102340629132385,29.298656924253144,62],[41.77713882885196,29.84164887859627,90],[40.78291344976654,30.46295048195195,156],[41.35979809705892,30.44334550765419,109],[41.43251100639419,30.642368611866882,41],[40.67988507046371,29.63799513713521,131],[40.619466440596945,29.939728921998597,96],[41.93046034086565,30.345445878447155,132],[41.41960528770814,29.593122118506688,39],[41.11711031598229,30.216414080772328,160],[40.58353744264058,29.056100502252995,32],[40.54553639620784,30.835540892696333,77],[41.857149465287996,30.46580891786339,143],[41.92768994663511,30.06326074058837,128],[41.588792706749835,29.955708834860463,137],[41.76582481033156,29.921674550156578,80],[40.10629756119285,30.2349149650939,146],[40.52907950590966,30.895994490836145,138],[41.54561048410985,30.592285889544677,116],[40.74999868131974,30.529345960321802,98],[41.59396802568135,30.997419846431892,96],[41.993052687983955,30.247575025532743,46],[41.82241255931607,30.477927105995118,149],[40.5284981419778,29.846684661084304,92],[41.45059683020941,30.414346981683817,121],[41.582685124365916,29.783346619930125,16],[41.65483113191307,30.77903118543862,150],[41.50491210565526,29.465489410832003,61],[41.45355437905699,29.680060373826734,59],[40.67433087931538,29.53663533911652,70],[41.50836078809634,30.790864719069717,126],[41.66739265244335,29.99028351438172,85],[41.35281121166624,29.971300614050516,96],[40.60854025932434,30.91913799917849,84],[40.89961904514097,30.698958780956062,132],[41.20778255899157,30.100825032955147,139],[41.5905981962688,29.336995742724017,136],[40.998454667440946,29.788074288629986,149],[41.25733190850898,29.458454748427016,99],[40.42678718088752,30.315922624094192,128],[40.444761171229224,29.800860185609903,110],[41.975717020658095,29.61656431858465,40],[40.77326681859753,29.735336616228693,94],[41.849384406958166,29.95024928221093,27],[41.01609661706589,30.274401699253566,60],[41.04910540075397,29.945293681700516,113],[40.501362025209,29.89907733139083,118],[40.7725320713127,30.644720441897984,114],[40.51486086860955,30.93838494924717,131],[40.93326957310255,30.938234308246404,99],[40.537643941191476,30.01303512824626,42],[41.1326448819912,29.341764085345538,70],[40.08831784056274,30.77742489396183,51],[41.413399399419966,29.749377469312705,122],[40.33431968584553,29.426287373855555,112],[40.40316716218342,30.623402817331787,0],[40.326134903931425,30.960800347578385,138],[41.752007597582605,30.11327077832108,37],[40.395531658999566,30.45455029291191,14],[41.14746269003706,29.74222971781704,68],[40.920699495921866,29.688917298771404,36],[41.214645485874414,29.393495581221085,39],[41.16217369093775,29.421615297098228,18],[41.154701949576975,29.069052406754523,44],[41.74791695873136,30.035403831564075,86],[41.597810760870345,29.953866021543814,65],[40.05125083856949,29.592019742075657,32],[40.493024868249066,29.00969370326604,104],[41.81180532940663,29.143994539901282,107],[40.56238904399965,30.948010242721555,68],[41.680947497289054,29.968815102116718,22],[40.59031094494036,30.566197749153417,74],[40.52859422260341,30.747200715246848,83],[41.26991133501576,30.70805448569572,68],[41.26673997083766,30.38085667929018,108],[41.449541826897274,30.310384094425558,35],[40.03551652388557,29.830535156389736,35],[40.68033308029736,30.700785807571886,31],[41.9436053587552,29.67821630107202,103],[40.51504410787986,30.990063879866803,69],[41.68007447132686,29.586459192757374,73],[41.48641624969095,30.37279697100343,81],[40.7930655225837,30.51037608695931,105],[40.27668663594132,30.849033518583738,36],[40.8637877776993,29.120058087467385,31],[40.26224523230235,30.492254998690196,56],[41.15721583623702,30.83344959317302,86],[41.36995796961197,29.148252666016678,122],[41.943017426426614,30.625200165207268,31],[40.61953275102172,30.77443287086153,98],[40.041641378715674,30.5267388833094,41],[41.50829145655365,30.258774277257345,87],[41.1321721145344,30.75248137149789,107],[41.18771020436385,30.436271465277212,22],[41.15425006086986,30.284348678302102,109],[40.155216654999144,29.769110211902152,88],[41.634090727924146,29.27119860041297,142],[41.453066473411546,30.46074184105345,124],[41.74002404439332,30.75858901250734,112],[40.50680341460031,29.807399636265302,76],[40.344338656955536,29.685462424124083,140],[40.83738008197551,29.562095753167725,7],[41.6597886509418,29.811210049626972,49],[40.44363586246647,29.46369020132878,81],[41.905329716167905,30.005797402961157,26],[40.908909610691076,29.624576968462577,153],[41.43783774068558,29.776225125408498,148],[40.923928700925515,29.69715339231276,131],[40.85463354741303,30.367888799895162,114],[41.726473798054634,30.98540418718771,143],[41.94196355895524,30.93066612517685,62],[41.57377196472462,30.038818445022688,27],[41.640631906422236,30.87329348683696,58],[41.01631194467269,29.732697759789342,60],[41.43568311738886,29.423923015506634,67],[41.57572962227099,30.9510139395383,38],[40.206965498183955,30.81752178194161,55],[40.86632762029001,30.82467060670666,53],[40.68149013624569,30.001499672201856,123],[40.39923820358123,30.843649674437852,58],[40.722199519516224,29.52053009050062,67],[40.64778346967559,29.249157164477214,80],[41.2210524723125,29.839904455275196,36],[40.051118172179656,30.38451319102393,50],[40.42872951182155,29.339144931134925,93],[41.98399677012939,29.865012797160432,54],[41.81784892928914,30.85810424109751,131],[41.710822178730325,29.37929359220928,64],[40.84021730311336,29.994955061767822,34],[41.21202403036283,30.569614585756923,86],[40.46798902576318,30.286480307134802,112],[41.108845517334906,30.33728088758969,56],[41.56912774095417,29.173937887767902,28],[40.59348760499003,29.085486692390642,55],[40.17401448758002,29.5270691325342,76],[40.73370844616253,30.72401894769545,79],[40.4881033304724,29.636942474116232,75],[40.691391223840235,29.266851474294608,123],[41.50979301858672,29.602367377144876,63],[40.23294900959584,29.56532345021043,149],[40.833411406659266,29.301363693466893,112],[41.75566564612751,29.083316132723375,117],[41.008564980790815,29.84269654351492,69],[41.435740545745425,29.612797608676647,120],[40.05374572511687,29.359203817777423,102],[41.29321067097813,29.543165064989985,70],[40.297163843459714,30.984205681112595,36],[41.37401075026334,30.755397754488335,99],[40.086667053842035,30.29417941699002,86],[41.31679265613786,30.803069638353772,18],[41.52338591115692,29.67685866932658,144],[40.06889821313756,30.402747560178092,91],[41.7817873919039,30.78372178637335,124],[41.0131588784617,30.72857081320025,127],[40.093787860115256,29.223583788151537,140],[41.703529675093684,29.26355587555213,82],[41.363658490114474,30.046274200044717,96],[40.05094930681385,30.422786418587712,22],[40.70804084199187,29.720822784845392,132],[40.528362353107504,30.589101784257153,115],[40.35752027047218,29.45295410342181,156],[41.39579047560531,30.79612564395124,101],[40.19543753654043,29.028334573933265,29],[41.246949187826004,30.780985179875017,99],[41.279542087322405,29.535352278186338,1],[40.43950466451095,30.069636727438358,100],[40.213257360200096,29.982090720546115,67],[40.21560228102272,29.226559639826505,31],[41.89019972572895,29.638593640220236,43],[41.9943576544837,29.70961287713778,150],[41.81164528858995,30.63314345032046,31],[41.59733409839209,30.83499518409454,136],[41.7270128719161,30.231182648388444,151],[40.63989967366798,29.99883583886388,123],[41.2413219445869,30.849866099610946,116],[41.42553403662128,29.0567266392988,132],[41.41623145912014,29.158810094677435,12],[41.29538340934891,30.787087131414463,89],[40.608567150775144,29.316419237690162,29],[40.986555698639066,30.189762291949993,1],[41.96207663638366,30.427565142606124,138],[41.92309222508011,30.037226266718534,75],[41.932194542791,29.97926908976294,129],[41.80422341754714,29.085696200153627,103],[40.088901657101566,29.01159858283599,31],[40.49186235864935,29.487936585574992,136],[41.83012748816642,30.62497365641482,79],[40.72659566004457,30.996392036812598,77]];
var y = [0.8214333335968349,0.3497303463087935,0.5944308115889594,0.90326051637511,0.25227377574412047,0.7924443551770926,0.37408454143312864,0.35894009049554865,0.9121873150170237,0.5274999029842096,0.47648896281927744,0.8575579123908101,0.2922540787250223,0.2753114365605134,0.18191853932946533,0.40044849911710423,0.6957423044933915,0.6901969275241562,0.4724178960252774,0.05607709438752373,0.492270338660342,0.0627584893010742,0.8443788573073159,0.6733782126000678,0.9618088201611379,0.8789662231851907,0.9827809254163544,0.8039023045631404,0.24257212121643867,0.24953528151780802,0.19526652033023417,0.9829719173570863,0.9659938596744717,0.4913052932959572,0.4258078460232235,0.22116015159532143,0.6346486395069815,0.4417351072170723,0.1192338243121207,0.13960917080258306,0.5167858035555752,0.10199001257199125,0.08502024442512668,0.9014132374144528,0.6848249266465247,0.5638649854584057,0.016688699303709642,0.9510620232224996,0.0837564191489597,0.8926770266771402,0.04077598318418785,0.6977143943493358,0.3161891867302298,0.918476974592465,0.7723918182511962,0.09070005570736273,0.43781991152832545,0.19284619694996952,0.40488835686621005,0.2781294994162058,0.6206075075136155,0.37297808927150666,0.8427354904061224,0.1656686500932616,0.39795900389174976,0.25737991092328283,0.4766031979562735,0.7975521630030207,0.1343246784963641,0.08419499003458264,0.21949246616903695,0.28491096425328455,0.5496690868440186,0.41670261222793803,0.8080793566568634,0.1612891973832491,0.49708630478547056,0.6788606238713697,0.5050043257229933,0.712193027290358,0.3518666882532788,0.3696612822819454,0.0262505989999251,0.11872082458785549,0.22358514447680689,0.679801581393207,0.7336661063482428,0.35690834685212924,0.23987443858490298,0.44610410220074015,0.602296573116984,0.513988565048817,0.4246625283695298,0.0204628820170758,0.7401339883369173,0.2521800458649406,0.4124785826588582,0.6793567533277403,0.20944904556272315,0.6382982017070824,0.009932596870251276,0.7917541978544935,0.2867657548011635,0.5232937352460052,0.740253626641985,0.016362393945390297,0.9743293849824177,0.17872282444344267,0.6809963474403733,0.20196433718102158,0.13666363003528215,0.6524576671829245,0.14959009379988308,0.9528049916867354,0.6328474645678801,0.9185430698683374,0.8126398964163006,0.7777738137632977,0.5761386614642219,0.4852965130704514,0.958688611548423,0.15770570987709553,0.006359238294246783,0.6326059371913098,0.802879102798953,0.4899514371175724,0.4239807396916342,0.22634337022928896,0.8372879588722946,0.9220635827239427,0.5215898399879331,0.16486256631822171,0.3022554857219397,0.8312660693932692,0.8713678675449166,0.37148003679582065,0.07624341926789246,0.1923310140511456,0.701467851869503,0.979532057072587,0.34583029987352676,0.26857531308851956,0.9199669338220073,0.47942293877592657,0.940299941620879,0.9880183326595204,0.9291969393358157,0.6640147689885243,0.9369354318966192,0.8118371339426498,0.5615646199240405,0.2213005477769363,0.5209478286034877,0.8083286866742898,0.6577649565854675,0.12693803686575933,0.10769648895486084,0.4003425011294708,0.799292742446871,0.5239946076369799,0.8948464146392365,0.8770465253627224,0.9973349539231131,0.5755985404743935,0.45215333880884456,0.20277724511098016,0.9928516448181068,0.8993304851118389,0.16358515933642392,0.16892837697935303,0.06273166099720173,0.6161820614231146,0.1996784022061311,0.2313624495774358,0.19716695478540514,0.6139931267258052,0.8678214905544641,0.8247623921629681,0.4149799874030311,0.3820304626352191,0.5109919962798382,0.8602663547050815,0.4788067434275338,0.23092598554272392,0.7203894963567177,0.7877239220329073,0.3097126782307178,0.3478173970552316,0.21930899663888126,0.3737698199340216,0.5261437712274111,0.17514240814914595,0.8914910246414347,0.6918364720498269,0.367179579625025,0.8434721020270177,0.3445389086925057,0.5438133350827987,0.5883514167898505,0.15598208784940204,0.11944860740238927,0.7471283634893997,0.08790785549847557,0.5895232870939966,0.05013128315774962,0.40514170912335756,0.5077010001867066,0.5887669886801237,0.6396437482881265,0.5557076570079598,0.2213735979858693,0.09637660520440638,0.24249939438594725,0.07505984230604179,0.9909972819564445,0.18513998403438126,0.6714512674376014,0.9137328144973431,0.24776518292108962,0.7796948619960387,0.6021510278654567,0.7475182922942958,0.8264876371135801,0.8977306420754467,0.889756238922258,0.6672833937682445,0.06425260737875593,0.1208134485047887,0.9492972312162284,0.8377163422545457,0.14913263965864276,0.5370215481492406,0.8722949575752568,0.35738622964717415,0.5997405493676169,0.6325243282137598,0.6999680518212552,0.3793509371631223,0.37821803280545385,0.6503611340363857,0.44059300986052463,0.18560604401787129,0.1537846153571778,0.30247100606645794,0.8271593236661565,0.032369805852166644,0.7614485653907659,0.9159545080253673,0.3087637482352368,0.263593688951379,0.13737218900360415,0.40652281645986865,0.07544330762725782,0.7262151314336069,0.7967752949680158,0.7618856822399884,0.8610884665265852,0.335708649641173,0.08840484843496554,0.33861608575335844,0.7118720371287106,0.3112146778130711,0.010482414457970046,0.8044274902235085,0.8879518995406834,0.5627319796522896,0.07947429874189482,0.6435471650519238,0.10002582919407521,0.9832147967227267,0.5045450205981259,0.9187876687627108,0.25337533370904985,0.29849268088286696,0.058392289548514054,0.5901875880507625,0.7735295019722928,0.6507079053964628,0.2331589922083086,0.083583292744557,0.7740927802654103,0.14083165477164084,0.06871101510454714,0.4133332253933646,0.8069040257787043,0.7049735409878564,0.002028348528744006,0.033114587231761305,0.8238610210527555,0.34637588807188635,0.6256775516676956,0.7070155818783501,0.8465206373504315,0.9034393732192136,0.6101420591280795,0.36034578543136786,0.29943495055165115,0.3490403179997619,0.16061617084425484,0.9285388463172923,0.5707230633479794,0.15884715249292314,0.1427597647129777,0.7847403236226067,0.48686508721691757,0.7407842865158298,0.42672304209599266,0.8915754592842546,0.6254263285986592,0.4786023771445096,0.15788588447248442,0.8000204103895194,0.708577610115898,0.5960456489495183,0.17572279761555465,0.9051824574384899,0.44471272579031096,0.8312973771647363,0.7021562986605179,0.8657615185364864,0.6030844834722919,0.3908279127828489,0.5733697680511889,0.5368011354062399,0.4191681834213148,0.347986173587413,0.5388260634195019,0.20663333020981134,0.5891120527089992,0.5390112794271711,0.9089216040716206,0.892477196837403,0.8716116138431755,0.10301603335930931,0.42963382055355015,0.263144951163788,0.9711522936763257,0.39641455698695194,0.39532959271371904,0.7520959674796521,0.5543474279798539,0.18058402700322596,0.48918007270560193,0.21829188980142722,0.7692606478447652,0.1938483518419245,0.4289419654155302,0.12116469544593778,0.5708080362711367,0.521619770193184,0.13344881630960792,0.36078151943712555,0.6348270589623748,0.8909812734785314,0.0430155966614183,0.12296473728273116,0.27687839697936245,0.18892495959655098,0.13169722735595157,0.4041202716486474,0.39850206832842705,0.37227635039769424,0.8786464756891172,0.8725560190420436,0.4431311543160159,0.024623700503562107,0.9160817369961092,0.3142183926926625,0.8034639035829609,0.21323646797618268,0.23967799632845854,0.03576231017122189,0.10565491642646307,0.17094444085558713,0.9483041030935351,0.6496852504302253,0.4612150486053028,0.07288250060377721,0.5996043558702735,0.7792092878180039,0.09203996200682774,0.6399582091988614,0.23355502711075116,0.3202761249805963,0.9187710368397921,0.7965425312152141,0.5942312297577936,0.015264477550693156,0.006019169560684379,0.5171490355464843,0.3987093154930268,0.5687370956917959,0.9535300980406969,0.03604466837321407,0.483013347136366,0.6800966204350107,0.17036069398497844,0.960109782803555,0.2636296430452747,0.8140954382011143,0.5479634993171245,0.08508513501426984,0.030926645308227307,0.5663629037093911,0.43317972183633935,0.47760681722791354,0.48894257545749054,0.5940406855258298,0.3852081060735324,0.5038529380807868,0.5820868663387715,0.236110234701556,0.3365487831951395,0.3162779000165288,0.8707597095037389,0.3617715608222132,0.3717138623255929,0.2425605371347055,0.8941352327312664,0.4349585966743086,0.6568098792179193,0.19244360200271649,0.3120698742560679,0.3271559826566006,0.7806144668929516,0.47070181970843783,0.49961056577245744,0.6741010344015141,0.588176335689137,0.8591061903690269,0.594083587360611,0.4775260479778547,0.5245752072378049,0.41730471282305004,0.5246435850534741,0.1621126590580657,0.5347690464486816,0.8625470948271323,0.3308922052192673,0.5144379568144792,0.6755334806257325,0.3175257336553978,0.974629199430866,0.6223809663487243,0.4315933834347665,0.27879373988477685,0.8274084302613538,0.29228612650802743,0.9267868266937334,0.40235021251718184,0.7023875438702674,0.2790009956533901,0.48013367052998257,0.8368746498151882,0.6748791682908009,0.6269306792222367,0.9848170241542948,0.246029956825895,0.08501020753753563,0.26707501505452313,0.21978974228258652,0.08754413004001815,0.2241553478029934,0.03975989367124644,0.11813684530396862,0.7410969238594256,0.6505318836234744,0.905571221598843,0.017681329403506307,0.5336446244906525,0.4289932160766592,0.7102981892230269,0.9708007191778465,0.316555355523954,0.2261881661263545,0.8538981733171627,0.07699924331377916,0.12747022957774834,0.6620125315749068,0.6373784690089048,0.7378136716931865,0.7500260882418259,0.27298476799541005,0.3594152447360097,0.6604475596685924,0.8640045573835131,0.6236026954733229,0.7286495035128462,0.3714647594974654,0.06934923491704392,0.9521923963900543,0.4360859784085398,0.7188145843192772,0.13233404126267012,0.5811518618445128,0.3587995652990892,0.7029380879099922,0.5897349400489529,0.6573170595406008,0.7239816359452553,0.9984307889500987,0.6312952758870178,0.33006194804691535,0.6624611542635241,0.15750866791042806,0.2264435579519386,0.7834551679990132,0.316891520718803,0.5381506746899956,0.8680584850520436,0.7849858137795975,0.2701441183231261,0.5034513468944768,0.35597537677902946,0.9172686581945815,0.9077556844917376,0.8543828856865034,0.5375753225757478,0.10619037805430054,0.29229965806287206,0.14841223055061592,0.1418890107760311,0.7752191961492234,0.9787188304941254,0.40171239780340207,0.571160336440605,0.25468693863793623,0.4748725525283368,0.5853623989139682,0.4425392912350865,0.31363689077114687,0.39540368243438007,0.27252865367944246,0.5909463488296152,0.1068017511546171,0.9781042714384918,0.8163648969325159,0.013441348649899432,0.30682156871894484,0.5729452038047267,0.5085451890133883,0.3840742800336625,0.6398840866610018,0.7343503886089249,0.16312264877336258,0.217240548748324,0.3055953112043923,0.3805090291969875,0.49919525217085425,0.7392758563916915,0.6387185024997766,0.7771037699434657,0.8991527269939075,0.6101529338867637,0.7366840840598217,0.4698217445163879,0.703058403515338,0.389348003188984,0.27015633208529866,0.7985647491996501,0.17741625351380885,0.18485681056822134,0.34114418248487777,0.6641357547469362,0.5816855760279604,0.9654135715073124,0.04737191206913227,0.7733515913123676,0.7122637130372884,0.8602396439815667,0.603337704460746,0.812427647625759,0.7636868326001698,0.43451530245140435,0.38876851835647264,0.780956824768338,0.8593837565753628,0.7840121116915342,0.548010603123835,0.8496490754062871,0.8359702873838333,0.8204904584956427,0.6061070102018855,0.07876902185708645,0.1305783594254213,0.8748268969198243,0.21174008072695094,0.9703631242096626,0.0338542047691095,0.508247428681547,0.7125086487433043,0.30619628296398393,0.9576184895515509,0.9900490915865467,0.10154509077693263,0.8691076113864329,0.9496411171710482,0.8475576915100671,0.49262864399935724,0.2575411060902082,0.06189116419593366,0.6793054168214099,0.28057489734246244,0.1449509753896696,0.1970443044235124,0.5276972863723592,0.6010634611552041,0.8892824737062455,0.7471078979407524,0.6651429762693817,0.535436107633374,0.23555405411084962,0.23230796771182272,0.03168880313805267,0.3816951946379039,0.8782147766613542,0.6429572824761454,0.5394160542117905,0.5495453100622241,0.31433162815895743,0.010409862536075787,0.47302046427444466,0.7716128592802549,0.5612727657406882,0.9376804665475378,0.8751626629358467,0.0403882435258518,0.7282657090281359,0.5732477390444952,0.9509353489016203,0.3542994231169527,0.9065895724378044,0.1198084900498817,0.02921887474357243,0.37312286744225753,0.8534341464633297,0.5562585714673625,0.7552670219771196,0.3101221168870183,0.6437772397388468,0.9651800561660091,0.401681763898722,0.9020009604582226,0.7505480955658335,0.045483389673133034,0.06648435013791154,0.6770505407391538,0.995984628241509,0.15207566841675169,0.4023762074420565,0.15596770390852432,0.6859342988547066,0.7491458994013322,0.6852221346079894,0.8143338112940637,0.6191981429079327,0.7435993011635234,0.23639206738762075,0.8242368958070292,0.7508216174732949,0.6773667051279788,0.03836344458749674,0.6175371129024572,0.705810321395097,0.03510105360753135,0.3728316974915744,0.7533739557029884,0.5694383730671053,0.8061176405980119,0.1950645408759224,0.4024558072000415,0.9788531349185035,0.178880611646262,0.7797973875692961,0.3280484366628962,0.8385017129236263,0.7401867214428195,0.19269719260304696,0.3690434375159155,0.5245566279781366,0.37396863070088626,0.5564346914294411,0.876356260308675,0.8278484922197349,0.04778064576468544,0.7154579755698907,0.25815492520527616,0.6231075417673106,0.18610241225260848,0.8796220785894464,0.4923399334333398,0.5064485198096425,0.4443598473601966,0.9727606847875727,0.05510001882350268,0.4735532514153975,0.7000826323777332,0.6106267423638281,0.8816171711731107,0.45303399638930153,0.5363768375960094,0.7203593672641262,0.6491815405058878,0.23349264997284402,0.2240707705198206,0.7105251233614118,0.6279210017670047,0.15182865463896644,0.5055808992415869,0.23173655112907388,0.6510665533247657,0.6152383460107675,0.3003067166114919,0.7266775403748167,0.1184168097081344,0.304253381839662,0.5546386689721359,0.45175323297095327,0.2628988781501971,0.7900645733716762,0.7013482370839708,0.5242864620380545,0.7065748149796911,0.024045685241039783,0.6452721030643882,0.03211002694654086,0.29188670755976287,0.6653557007108215,0.025157823175898653,0.4849719846283125,0.7553502049721654,0.1284567286260312,0.7006883817020697,0.2854352781394667,0.181210858014063,0.4731063316122328,0.9759908083418423,0.21998801273603852,0.7631922233277357,0.6681836075789844,0.9346127604967358,0.04758343513562413,0.24821918816143929,0.6623044644334579,0.9252377170596624,0.5781262263560412,0.810341820811844,0.6371599528809402,0.7544489887826902,0.1832692572422856,0.4197914500552977,0.3758329785767853,0.9638473987791707,0.9300784735218819,0.07889555428194495,0.5070537746025587,0.0649792364689028,0.9370109569926885,0.300279969082073,0.18020770440778722,0.28883247267667644,0.037193973779340306,0.7835129533131,0.5581155790990062,0.03201350862308394,0.35015882554040423,0.7694131040408358,0.05437932748829288,0.10900950936098464,0.7729018570794721,0.2788854940028367,0.6572901775478277,0.2874009474682073,0.0559063435179834,0.37888176866542644,0.4418721411952975,0.30400029498498005,0.9612974054082768,0.40326288702945745,0.11336756864902431,0.4644790603666942,0.28798008714570367,0.24981301534433475,0.024360648870753066,0.9847347469554033,0.9934431365471708,0.2447136391066409,0.8257719194547326,0.6787822394741194,0.5597060535795426,0.665881376672816,0.49470784439431514,0.537616648376068,0.3385039191802226,0.38020343647116417,0.5371466263334947,0.168870801061902,0.9355427990518228,0.5329884101089164,0.6930980780997311,0.21895457113439853,0.26080974933592516,0.8954792883897902,0.23249520963730075,0.21196191969157585,0.9934960620080342,0.5876243346648358,0.3705218745630634,0.6610160886578562,0.9264420881580329,0.12264046381007776,0.42030454205126144,0.7757753724622529,0.9190449631701798,0.42481478572656206,0.4419889341572949,0.8182171647258838,0.0611368656522886,0.5733817005467354,0.33602402099734396,0.5307791547278284,0.862644840573328,0.2757463415501613,0.5840276382817802,0.246410604061869,0.42835995154978423,0.6149276992314354,0.6387903135640813,0.6082690499384673,0.7215639651337871,0.8051277613266441,0.043508721099291714,0.9930808835179725,0.34237749790535377,0.9203640740070214,0.14624119331592134,0.42259932056884497,0.49856551979699915,0.1645142939589439,0.8208865401761574,0.9156272220817065,0.45837314522598493,0.08711128456613748,0.7860570326996184,0.652678483560726,0.3595672257427016,0.3803774928363983,0.18426014004852775,0.09602811560907565,0.3511235059810236,0.20617353709170483,0.1707815583706609,0.9532704327238055,0.8576708997599549,0.12704340087509935,0.3103656676408937,0.49663329626612795,0.1413204735503557,0.10821119493968268,0.36418907775125753,0.1919600148901135,0.7288831691033386,0.024059953737558093,0.926855120737373,0.19595376370289386,0.038896129399395685,0.6877439212886851,0.6338076630642664,0.17655280393141526,0.4221998301386185,0.867159382146077,0.7487907089509829,0.27992780171305065,0.07943341722831576,0.20734980917097712,0.980393304342722,0.7413613819415779,0.23066109634914955,0.4616092549587345,0.8464265314988244,0.7528424666540705,0.4089131954246057,0.43192592691853804,0.8934771881744836,0.6203380337722759,0.5904185440295624,0.5562125819371939,0.5489743305331138,0.0840315752324392,0.6232316275347263,0.026711624647143717,0.08973494754879652,0.692925974806804,0.20336039077484402,0.08698267979133933,0.6221641610328135,0.8360610826992145,0.26367747147642406,0.2900809811321934,0.46696522041131594,0.03886495464743667,0.5956068083963821,0.812170295985081,0.5439862327904847,0.4746699033686712,0.5935242590478889,0.25236852980723135,0.36822721708785466,0.1345946777260083,0.8447474145140328,0.9337479148990782,0.6021260617716606,0.14533386616986088,0.22252995417448407,0.9695805739517769,0.5347155050705372,0.7667310036337949,0.9731400418472134,0.4187476895039226,0.5936539347061767,0.6061770789472334,0.24865850358048536,0.22260407696272488,0.7461445016368233,0.786563900971132,0.9361724446834643,0.9765853676147151,0.5207038268831579,0.6258670759293488,0.47839228862262906,0.048691862141040376,0.3204121880314048,0.6769484386207589,0.34201621010872674,0.7197340808675796,0.9100130241893476,0.5491529380343241,0.5596160969767339,0.9633177439155596,0.3305169425136283,0.016174976672651553,0.5830545316605857,0.8130588848645008,0.032093800904755776,0.7123960842476986,0.12297921608341222,0.10002226336256093,0.10555960340544512,0.4880886683193908,0.5151810499410137,0.49367755423492765,0.7660868410756367,0.299845700554906,0.15483449363374868,0.24159947375108026,0.4995756853037694,0.5578977705746551,0.27770367812323205,0.5079020608097664,0.13431347718187858,0.8771618312567508,0.6434622822963791,0.06453620506505042,0.31920341916752126,0.7378939984041435,0.2933343213545123,0.37189085217152185,0.7038467682473768,0.5291163799978638,0.7191451912293607,0.7219176896492303,0.6957873941745985,0.6065854584130193,0.9940028077097951,0.0416081362333145,0.5599186921173074,0.20764412847510139,0.6225483530711353,0.3643046628767348,0.9160893632280653,0.6344463298794041,0.3016296148589839,0.43407430827536553,0.17918238753938454,0.8586743324757091,0.7224535894763418,0.5964609054903256,0.5887848665888809,0.010025262722904493,0.15074433482253324,0.7067263840709297,0.36119387332432473,0.3571685640802329,0.793580553868263,0.8783618753468794,0.2904250694815853,0.7102523027104586,0.23021969844012924,0.3018301472226981,0.6631682696740817];

// Initialize and train the linear regression
var predictFn = null;
var lr = new LinearRegression(X, y, {algorithm: 'GradientDescent'});
lr.train(function(err) {
  if (err) {
    console.log("error", err);
  }

  app.get("/get_safety/:latitude/:longitude", function(request, response) {
    var lat = parseFloat(request.params.latitude);
    var lng = parseFloat(request.params.longitude);
    var d = new Date();
    response.send(String(lr.predict([lat, lng, d.getDay() * 24 + d.getHours()])));
  });
});

// load local VCAP configuration  and service credentials
var vcapLocal;
try {
  vcapLocal = require('./vcap-local.json');
  console.log("Loaded local VCAP", vcapLocal);
} catch (e) {}

var appEnvOpts = vcapLocal ? { vcap: vcapLocal } : {}

var appEnv = cfenv.getAppEnv(appEnvOpts);

if (appEnv.services['cloudantNoSQLDB']) {
  // Load the Cloudant library.
  var Cloudant = require('cloudant');

  // Initialize database with credentials
  var cloudant = Cloudant(appEnv.services['cloudantNoSQLDB'][0].credentials);

  // Create a new "techsummit-2017" database.
  cloudant.db.create('techsummit-2017', function(err, data) {
    if (err) {
      console.log("Error while creating DB. It might already exist.");
    } else {
      console.log("Created database.");
    }
  });

  db = cloudant.db.use('techsummit-2017');
}

//serve static file (index.html, images, css)
app.use(express.static(__dirname + '/views'));

var port = process.env.PORT || 3000
app.listen(port);
